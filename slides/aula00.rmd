---
title: "Aula 3 - Gráficos"
author: "William Nilson de Amorim"
date: "06/01/16"
output: 
  ioslides_presentation:
    mathjax: "//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    keep_md: true
    self_contained: true
---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(pander)
library(ggplot2)
library(dplyr)
library(magrittr)
panderOptions("table.style", "rmarkdown")
```

## Introdução 

- Analisar um gráfico é uma maneira rápida e concisa de visualizar certas informações contidas em um conjunto de observações. 
- O gráfico certo a ser utilizado em cada situação depende da informação que queremos visualizar e do tipo de variável que estamos trabalhando.
- Um gráfico mal muitas vezes falha em trazer com clareza a informação que queremos visualizar e, em alguns casos, pode levar a falsas evidências.

## Gráficos de barras {.smaller}

Amostra: estudantes de estatística

X: cor do cabelo --- Y: cor dos olhos --- W: sexo

```{r, warning=FALSE, echo=FALSE}

HairEyeColor %>% 
  as.data.frame %>%
  ggplot +
  geom_bar(aes(x = Hair, y = Freq, fill = Hair), stat = "identity", width = 0.6) +
  labs(y = "Frequência", x = "Cor do cabelo") +
  scale_x_discrete(labels = c("Preto", "Castanho", "Ruivo", "Loiro")) +
  scale_fill_manual(values = c("black", "#663333", "brown", "#FFCC00")) +
  guides(fill = FALSE)

```

## Gráficos de barras 

Podemos associar a variável "cor dos olhos" à cor das barras do gráfico.

```{r, warning=FALSE, echo=FALSE}

HairEyeColor %>% 
  as.data.frame %>%
  ggplot +
  geom_bar(aes(x = Hair, y = Freq, fill = Eye), stat = "identity", width = 0.6, 
           position = "dodge") +
  labs(y = "Frequência", x = "Cor do cabelo") +
  scale_x_discrete(labels = c("Preto", "Castanho", "Ruivo", "Loiro")) +
  scale_fill_manual(values = c("#663333", "#0066CC", "#996666", "#669933"), 
                    labels = c("Castanho escuro", "Azul", "Castanho claro", "Verde"))

```

## Gráficos de barras

Além disso, podemos dividir o gráfico pela variável "sexo" e comparar as frequências para homens e mulheres.


```{r, warning=FALSE, echo=FALSE}

sex_labels <- list(
  'Male'="Masculino",
  'Female'="Feminino"
)

sex_labeller <- function(variable,value){
  return(sex_labels[value])
}

HairEyeColor %>% 
  as.data.frame %>%
  ggplot +
  geom_bar(aes(x = Hair, y = Freq, fill = Eye), stat = "identity", width = 0.6, 
           position = "dodge") +
  facet_grid(Sex ~ ., labeller=sex_labeller) +
  labs(y = "Frequência", x = "Cor do cabelo") +
  scale_x_discrete(labels = c("Preto", "Castanho", "Ruivo", "Loiro")) +
  scale_fill_manual(values = c("#663333", "#0066CC", "#996666", "#669933"), 
                    labels = c("Castanho escuro", "Azul", "Castanho claro", "Verde"))

```


## Histogramas

Amostra de tamanho 400 de uma distribuição normal com média 170 e desvio padrão 8.

```{r, warning=FALSE, echo=FALSE}

r <- rnorm(400, 170, 8)

r %>% 
  data.frame(x = .) %>% 
  ggplot +
  geom_histogram(aes(x=x), fill = "white", color="black", binwidth=3) +
  labs(x = "", y = "Frequência")

```


## Histogramas

Em vez de representar a frequência no eixo y, podemos optar pela densidade, definida pela razão entre a proporção e a amplitude de cada classe. Um histograma construído dessa forma tem área 1.

```{r, warning=FALSE, echo=FALSE}

r %>% 
  data.frame(x = .) %>% 
  ggplot +
  geom_histogram(aes(x=x, y = ..density..), fill = "white", color="black", binwidth=3) +
  labs(x = "", y = "Densidade")

```


## Histogramas

Assimetria à direita

```{r, warning=FALSE, echo=FALSE}

rbeta(1000, 2, 5) %>% 
  data.frame(x = .) %>% 
  ggplot +
  geom_histogram(aes(x=x, y = ..density..), fill = "white", color="black") +
  labs(x = "", y = "Densidade")

```

## Histogramas

Assimetria à esquerda

```{r, warning=FALSE, echo=FALSE}

rbeta(1000, 5, 2) %>% 
  data.frame(x = .) %>% 
  ggplot +
  geom_histogram(aes(x=x, y = ..density..), fill = "white", color="black") +
  labs(x = "", y = "Densidade")

```

## Boxplots

Dados da temporada de Baseball de 1986 (EUA)

```{r, warning=FALSE, echo=FALSE}

Baseball %>% 
  ggplot +
  geom_boxplot(aes(y = homer86, x = league86)) +
  labs(x = "Liga", y = "Número de Home runs")

```

## Boxplots

Dados da temporada de Baseball de 1986 (EUA)

```{r, warning=FALSE, echo=FALSE}

Baseball %>% 
  ggplot +
  geom_boxplot(aes(y = homer86, x = league86, fill = div86), position = "dodge") +
  labs(x = "Liga", y = "Número de Home runs")

```

## Gráficos de dispersão

```{r, warning=FALSE, echo=FALSE}

Baseball %>%
  ggplot +
  geom_point(aes(y = homer86, x = hits86)) +
  labs(x = "Número de rebatidas", y = "Número de Home runs")

```

## Gráficos de dispersão

```{r, warning=FALSE, echo=FALSE}

Baseball %>%
  ggplot +
  geom_point(aes(y = runs86, x = hits86)) +
  labs(x = "Número de rebatidas", y = "Número de corridas")

```